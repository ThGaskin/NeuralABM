_:
  colors: &colors
    yellow:         &yellow       '#F5DDA9'
    darkblue:       &darkblue     '#2F7194'
    red:            &red          '#ec7070'
    skyblue:        &skyblue      '#97c3d0'
    green:          &green        '#48675A'
    lightbrown:     &lightbrown   '#C6BFA2'
    orange:         &orange       '#EC9F7E'
    lightgreen:     &lightgreen   '#AFD8BC'
    grey:           &grey         '#3D4244'
    pink:           &pink         '#F8A6A6'

# Likelihood from data sweep
likelihood:
  based_on:
    - .creator.multiverse
    - .plot.facet_grid.line
  select_and_combine:
    fields:
      counts: true_counts
  transform:
    - .sel: [!dag_tag counts , {p_infect: 0.2}]
      kwargs:
        method: nearest
    - sub: [!dag_prev , !dag_tag counts ]
    - pow: [!dag_prev , 2]
    - .sum: [!dag_prev , ['kind', 'time']]
    - mul: [!dag_prev , -1]
    - np.exp: [!dag_prev ]
    - .squeeze: [!dag_prev ]
      kwargs: {drop: true}
      tag: data
  x: p_infect
