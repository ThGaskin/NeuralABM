---
_:
  colors: &colors
    yellow:         &yellow       '#F5DDA9'
    darkblue:       &darkblue     '#2F7194'
    red:            &red          '#ec7070'
    skyblue:        &skyblue      '#97c3d0'
    green:          &green        '#48675A'
    lightbrown:     &lightbrown   '#C6BFA2'
    orange:         &orange       '#EC9F7E'
    lightgreen:     &lightgreen   '#AFD8BC'
    grey:           &grey         '#3D4244'

  # True parameters
  true_parameters:
    alpha:        &alpha          1.2
    beta:         &beta           4
    kappa:        &kappa          2

  # Page widths in inches for latex documents: ensures easy integration into latex documents
  page_widths:
    full_width:     &full_width         7.00787402
    half_width:     &half_width         !expr 7.00787402 / 2
    third_width:    &third_width        !expr 7.00787402 / 3
    quarter_width:  &quarter_width      !expr 7.00787402 / 4
    fifth_width:    &fifth_width        !expr 7.00787402 / 5
    eighth_width:   &eighth_width       !expr 7.00787402 / 8

.defaults:
  style:
    figure.figsize: [ *half_width, *fifth_width ]

# ======================================================================================================================
#  ╔═╗╦  ╔═╗╦ ╦╔═╗
#  ╠═╣║  ╠═╝╠═╣╠═╣
#  ╩ ╩╩═╝╩  ╩ ╩╩ ╩
# ======================================================================================================================
alpha:
  based_on:
    - loss_potential
    - .defaults
  select_and_combine:
    fields:
      param1: alpha
  helpers:
    set_labels:
      x: '$\alpha$'
    set_hv_lines:
      vlines:
        - pos: *alpha
          color: *red
          zorder: 1
          linestyle: dotted
# ======================================================================================================================
#  ╔╗ ╔═╗╔╦╗╔═╗
#  ╠╩╗║╣  ║ ╠═╣
#  ╚═╝╚═╝ ╩ ╩ ╩
# ======================================================================================================================
beta:
  based_on:
    - loss_potential
    - .defaults
  select_and_combine:
    fields:
      param1: beta
  helpers:
    set_labels:
      x: '$\beta$'
    set_hv_lines:
      vlines:
        - pos: *beta
          color: *red
          zorder: 1
          linestyle: dotted

# ======================================================================================================================
#  ╦╔═╔═╗╔═╗╔═╗╔═╗
#  ╠╩╗╠═╣╠═╝╠═╝╠═╣
#  ╩ ╩╩ ╩╩  ╩  ╩ ╩
# ======================================================================================================================
kappa:
  based_on:
    - loss_potential
    - .defaults
  select_and_combine:
    fields:
      param1: kappa
  helpers:
    set_labels:
      x: '$\kappa$'
    set_hv_lines:
      vlines:
        - pos: *kappa
          color: *red
          zorder: 1
          linestyle: dotted

# ======================================================================================================================
#  ╔═╗╦  ╔═╗╦ ╦╔═╗   ╔╗ ╔═╗╔╦╗╔═╗
#  ╠═╣║  ╠═╝╠═╣╠═╣───╠╩╗║╣  ║ ╠═╣
#  ╩ ╩╩═╝╩  ╩ ╩╩ ╩   ╚═╝╚═╝ ╩ ╩ ╩
# ======================================================================================================================
alpha_beta:
  based_on: loss_potential_3d
  transform:
    - xr.Dataset:
      - param1: !dag_tag param1
        param2: !dag_tag param2
        loss: !dag_tag loss
    - .stack: [ !dag_prev , { ' ': [ 'seed', 'time' ] }, False ]
      tag: data
    - getitem: [ !dag_tag data, param1 ]
    - getitem: [ !dag_prev , 0]
    - getitem: [ !dag_prev , !slice [ &path_start 0, &path_stop 5000 ]]
      tag: path_y
    - getitem: [ !dag_tag data, param2 ]
    - getitem: [ !dag_prev , 0 ]
    - getitem: [ !dag_prev , !slice [ *path_start, *path_stop ] ]
      tag: path_x
    - getitem: [ !dag_tag data, loss ]
    - getitem: [ !dag_prev , 0 ]
    - getitem: [ !dag_prev , !slice [ *path_start, *path_stop ] ]
      tag: path_z
  helpers:
    setup_figure:
      subplot_kw:
        elev: 22
        azim: -313
    set_labels:
      x: '$\beta$'
      y: '$\alpha$'
    set_limits:
      x: [0, 8]
      y: [0, 5]
      z: [0, ~]
    call:
      functions:
        # Mark the non-trivial maximum
        - function: [matplotlib, pyplot.plot]
          args:
            - [*beta, *beta]
            - [*alpha, *alpha]
            - [0, 19]
          color: *red
          linestyle: dotted
        # Mark the trivial maximum
        - function: [matplotlib, pyplot.plot]
          args:
            - [0, 0]
            - [1, 1]
            - [0, 19]
          color: *green
          linestyle: dotted
        # Plot a sample trajectory
        - function: [matplotlib, pyplot.plot]
          args:
            - !dag_result path_x
            - !dag_result path_y
            - !dag_result path_z
          zorder: 10000
          color: black
          linestyle: dotted
          linewidth: 0.5
  style:
    figure.figsize: [*half_width, *half_width]
