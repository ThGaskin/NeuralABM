.variables:
  colors: &colors
    yellow:       &yellow       '#F5DDA9'
    darkblue:     &darkblue     '#2F7194'
    red:          &red          '#ec7070'
    skyblue:      &skyblue      '#97c3d0'
    green:        &green        '#48675A'
    lightbrown:   &lightbrown   '#C6BFA2'
    orange:       &orange       '#EC9F7E'
    lightgreen:   &lightgreen   '#AFD8BC'
    grey:         &grey         '#3D4244'

  # Page widths in inches for latex documents: ensures easy integration into latex documents
  page_widths:
    full_width:         &full_width         7.5
    half_width:         &half_width         !expr 7.5 / 2
    two_thirds_width:   &two_thirds_width   !expr 2 * 7.5 / 3
    third_width:        &third_width        !expr 7.5 / 3
    quarter_width:      &quarter_width      !expr 7.5 / 4
    fifth_width:        &fifth_width        !expr 7.5 / 5
    eighth_width:       &eighth_width       !expr 7.5 / 8

.matrix_defaults:
  style:
    figure.figsize: [ *third_width, *third_width ]
    axes.grid: False
    axes.spines.top: True
    axes.spines.right: True
    axes.linewidth: 0.5
  vmax: 1
  helpers:
    set_title:
      title: ''
    set_ticks:
      x:
        major: []
      y:
        major: []
    set_labels:
      x: ' '
      y: ' '
    set_limits:
      y: [max, min]
      x: [min, max]

frobenius_loss:
  based_on: .line_multiverse
  select_and_combine:
    fields:
      data: output_data/frobenius_error
  hue: num_vertices
  helpers:
    set_scales:
      y: log

loss:
  based_on: .line_multiverse
  select_and_combine:
    fields:
      data: output_data/loss
  hue: num_vertices
  helpers:
    set_scales:
      y: log

matrices/comparison:
  based_on:
    - .matrix
    - .matrix_defaults
  select:
    true_matrix:
      path: true_network/_adjacency_matrix
      transform: [.data ]
    predicted_matrix:
      path: output_data/predictions
      transform:
        - .isel: [ !dag_prev , { time: -1 } ]
          kwargs: {drop: true}
  transform:
    - pd.Index: [ [ 'true', 'predicted' ] ]
      kwargs: {name: 'kind'}
    - xr.concat: [ [ !dag_tag true_matrix, !dag_tag predicted_matrix ], !dag_prev ]
      tag: data
  col: kind
  aspect: ~
  size: ~
  figsize: [*two_thirds_width, *third_width]
  cbar_kwargs:
    label: ~

matrices/error:
  based_on:
    - accuracy
    - .matrix_defaults
  norm:
    name: LogNorm
  vmin: 1e-7
  vmax: ~
  cbar_kwargs:
    label: $\Vert \hat{\mathbf{A}} - \mathbf{A} \Vert_1$

marginals/degree_distribution:
  based_on: marginals_density_uni
  dag_options:
    define:
      n_bins: 200
      bw_method: 0.5
      sigma: 6
  helpers:
    set_title:
      title: Degree distribution $P(k)$
    set_labels:
      y: ' '
  style:
    figure.figsize: [*half_width, *third_width]

marginals/clustering:
  based_on: marginals_density_uni
  dag_options:
    define:
      n_bins: 1000
      min_bin: -8
      max_bin: 257
      bw_method: 0.2
      sigma: 4
  select:
    coords:
      path: predicted_network/_triangles
    param:
      path: predicted_network/_triangles
    param_binned:
      path: predicted_network/_triangles
    true_param:
      path: true_network/_triangles
  helpers:
    set_title:
      title: Triangle distribution $P(c)$
    set_limits:
      x: [0, 40]
    set_labels:
      y: ' '
  style:
    figure.figsize: [ *half_width, *third_width ]
